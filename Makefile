CC = c99
CFLAGS = -Wall -O0 -g3 #-fsanitize=address

all: tiny

# no mitigations
tiny.1996: tiny.c
	$(CC) $(CFLAGS) -o $@ $< \
		-fno-stack-protector \
		-static \
		-z execstack

# canary
tiny.canary: tiny.c
	$(CC) $(CFLAGS) -o $@ $< \
		-static \
		-z execstack

# canary
# NX
tiny.nx: tiny.c
	$(CC) $(CFLAGS) -o $@ $< \
		-static 

# canary
# NX
# PIE
# Full RelRO
tiny.all: tiny.c
	$(CC) -Wall -O1 -g3 -o $@ $< 

.PHONY: clean
clean:
	rm -f *.o tiny *~

